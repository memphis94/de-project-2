# Миграция данных из таблицы фактов по доставкам интернет магазина в новую модель и создание витрины данных для анализа доставок.

## Исходные данные:
### Таблица shipping, которая представляет собой последовательность действий при доставке, перечисленную ниже.
![image](https://user-images.githubusercontent.com/69753101/170810502-26afbb8b-beb7-4e09-8e18-1090aabc0a36.png)
#### shippingid — уникальный идентификатор доставки.
#### saleid — уникальный идентификатор заказа. К одному заказу может быть привязано несколько строчек shippingid, то есть логов, с информацией о доставке.
#### vendorid — уникальный идентификатор вендора. К одному вендору может быть привязано множество saleid и множество строк доставки.
#### payment — сумма платежа (то есть дублирующаяся информация).
#### shipping_plan_datetime — плановая дата доставки.
#### status — статус доставки в таблице shipping по данному shippingid. Может принимать значения:
    * in_progress — доставка в процессе 
    * finished — доставка завершена
#### state — промежуточные точки заказа, которые изменяются в соответствии с обновлением информации о доставке по времени state_datetime.
    * booked (пер. «заказано»);
    * fulfillment — заказ доставлен на склад отправки;
    * queued (пер. «в очереди») — заказ в очереди на запуск доставки;
    * transition (пер. «передача») — запущена доставка заказа;
    * pending (пер. «в ожидании») — заказ доставлен в пункт выдачи и ожидает получения;
    * received (пер. «получено») — покупатель забрал заказ;
    * returned (пер. «возвращено») — покупатель возвратил заказ после того, как его забрал.
#### state_datetime — время обновления состояния заказа.
#### shipping_transfer_description — строка со значениями transfer_type и transfer_model, записанными через :. Пример записи — 1p:car.

## Этапы работы:
1. Создание справочника стоимости доставки в страны shipping_country_rates
2. Создание справочника тарифов доставки вендора по договору shipping_agreement
3. Создание справочника о типах доставки shipping_transfer
4. Создание таблицы shipping_info с уникальными доставками
5. Создание таблицы статусов о доставке shipping_status
6. Создание представления shipping_datamart

## Итоговая схема:
![image](https://user-images.githubusercontent.com/69753101/170810627-52ebe095-7df9-4265-8d65-d909402c96d1.png)
